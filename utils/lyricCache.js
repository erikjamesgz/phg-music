"use strict";require("../common/vendor.js");const e=require("./storage.js");function r(e,r){return`lyric_cache_${r}_${e}`}exports.getCachedLyric=async function(t,c){try{const o=r(t,c),a=await e.getStorage(o);return a?a.timestamp&&Date.now()-a.timestamp>6048e5?(console.log("[lyricCache] 歌词缓存已过期:",t),await e.removeStorage(o),null):(console.log("[lyricCache] 命中歌词缓存:",t,c),a.data):(console.log("[lyricCache] 未找到缓存歌词:",t,c),null)}catch(o){return console.error("[lyricCache] 获取缓存歌词失败:",o),null}},exports.setCachedLyric=async function(t,c,o){try{const a=r(t,c),n={timestamp:Date.now(),data:o};return await e.setStorage(a,n),console.log("[lyricCache] 歌词已缓存:",t,c),!0}catch(a){return console.error("[lyricCache] 缓存歌词失败:",a),!1}};

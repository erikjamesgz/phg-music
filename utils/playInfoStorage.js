"use strict";const t=require("./storage.js"),e="last_play_info";let o=null;async function a(o){try{const a={time:o.time||0,maxTime:o.maxTime||0,listId:o.listId||"",index:o.index??-1,timestamp:Date.now()};await t.setStorage(e,a),console.log("[playInfoStorage] 播放信息已保存:",a)}catch(a){console.error("[playInfoStorage] 保存播放信息失败:",a)}}exports.getPlayInfo=async function(){try{const o=await t.getStorage(e);return o?(console.log("[playInfoStorage] 获取到保存的播放信息:",o),o):null}catch(o){return console.error("[playInfoStorage] 获取播放信息失败:",o),null}},exports.savePlayInfo=async function(t,e=!1){o&&(clearTimeout(o),o=null),e?await a(t):o=setTimeout(async()=>{await a(t),o=null},2e3)};

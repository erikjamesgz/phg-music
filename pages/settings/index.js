"use strict";const e=require("../../common/vendor.js"),t=require("../../i18n/index.js"),o=require("../../utils/system.js"),s=require("../../utils/i18n.js"),i=require("../../utils/config.js"),a={components:{RocIconPlus:()=>"../../uni_modules/roc-icon-plus/components/roc-icon-plus/roc-icon-plus.js"},data:()=>({currentTime:"9:41",statusBarHeight:o.getStatusBarHeight(),showLanguagePopup:!1,showSleepTimerPopup:!1,showServerModalFlag:!1,showResourceCachePopup:!1,showMetaCachePopup:!1,showAboutPopup:!1,showUserAgreementPopup:!1,pactAgreed:!1,serverAddress:"",testingConnection:!1,connectionTestResult:null,celadonTheme:!0,darkMode:!1,followSystem:!0,sleepTimerRemaining:0,sleepTimerPickerValue:[0,0],tempSelectedHour:0,tempSelectedMinute:0,resourceCacheSize:"计算中...",appCacheSize:"0KB",musicUrlCacheSize:"0KB",musicUrlCacheCount:0,metaCacheSize:"0KB",otherSourceCacheCount:0,otherSourceCacheSize:"0KB",lyricCacheCount:0,lyricCacheSize:"0KB",cleaningResourceCache:!1,cleaningOtherSource:!1,cleaningLyric:!1,audioFileCacheSize:"0MB",appVersion:"v1.0.0",currentLanguage:"",supportedLanguages:[],tempLanguage:""}),computed:{navbarStyle(){return{paddingTop:`${this.statusBarHeight}px`}},pactAgreedTime(){const t=e.index.getStorageSync("pactAgreedTime");if(t){const e=new Date(t);return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")} ${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`}const o=e.index.getStorageSync("appInstallTime");if(o){const e=new Date(o);return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")} ${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`}return"未知时间"},hourOptions(){const e=[];for(let t=0;t<=99;t++)e.push(t<10?`0${t}`:`${t}`);return e},minuteOptions(){const e=[];for(let t=0;t<=59;t++)e.push(t<10?`0${t}`:`${t}`);return e},formatSleepTimerRemaining(){const e=this.sleepTimerRemaining;if("number"!=typeof e||isNaN(e)||e<=0)return"";const t=Math.floor(e/3600),o=Math.floor(e%3600/60),s=e%60;return t>0?`${t}时${o}分${s}秒`:o>0?`${o}分${s}秒`:`${s}秒`}},created(){this.initSettings(),this.startClock(),this.initLanguageSettings()},async onShow(){o.setStatusBarTextColor("black"),e.index.$on("systemThemeChange",this.handleSystemThemeChange),console.log("[Settings] onShow: 已注册主题变化监听"),e.index.$on("sleepTimerUpdate",this.handleSleepTimerUpdate),this.followSystem&&(console.log("[Settings] onShow: 跟随系统模式，同步系统主题"),await this.syncSystemTheme());const t=getApp();if(t&&t.getSleepTimerRemaining){const e=t.getSleepTimerRemaining();this.sleepTimerRemaining="number"!=typeof e||isNaN(e)?0:e}},onHide(){e.index.$off("systemThemeChange",this.handleSystemThemeChange),console.log("[Settings] onHide: 已移除主题变化监听"),e.index.$off("sleepTimerUpdate",this.handleSleepTimerUpdate)},methods:{handleSleepTimerUpdate(e){const t=e.remaining;this.sleepTimerRemaining="number"!=typeof t||isNaN(t)?0:t},$t:e=>s.t(e),initSettings(){this.celadonTheme="false"!==e.index.getStorageSync("celadonTheme"),this.darkMode="true"===e.index.getStorageSync("darkMode"),this.followSystem="false"!==e.index.getStorageSync("followSystem");const t=o.getAppVersion();this.appVersion="v"+t.version,this.$nextTick(()=>{setTimeout(()=>{this.getCacheSize()},300)})},startClock(){const e=()=>{const e=new Date,t=e.getHours(),o=e.getMinutes();this.currentTime=`${t}:${o<10?"0"+o:o}`};e(),setInterval(e,6e4)},goBack(){e.index.navigateBack()},goToMusicSources(){e.index.navigateTo({url:"/pages/music-sources/index"})},toggleCeladonTheme(t){this.celadonTheme=t.detail.value,e.index.setStorageSync("celadonTheme",this.celadonTheme.toString()),this.applyTheme()},toggleDarkMode(t){this.darkMode=t.detail.value,e.index.setStorageSync("darkMode",this.darkMode.toString()),this.darkMode&&(this.followSystem=!1,e.index.setStorageSync("followSystem","false")),this.applyTheme()},async getRealSystemTheme(){try{const t=await e.index.getSystemInfo();if(console.log("[Settings] 系统信息:",t),console.log("[Settings] theme字段:",t.theme),t.theme)return console.log("[Settings] 微信小程序系统主题:",t.theme),t.theme;console.log("[Settings] 微信小程序未获取到theme，检查darkmode配置")}catch(t){console.error("[Settings] 获取系统信息失败:",t)}return console.log("[Settings] 无法获取系统主题，默认返回 light"),"light"},handleSystemThemeChange(t){console.log("[Settings] 收到系统主题变化事件:",t),this.followSystem?(console.log("[Settings] 当前处于跟随系统模式，更新主题"),this.darkMode=t.isDark,e.index.setStorageSync("darkMode",this.darkMode.toString()),console.log("[Settings] 已更新 darkMode:",this.darkMode)):console.log("[Settings] 当前不处于跟随系统模式，忽略主题变化")},async syncSystemTheme(){try{console.log("[Settings] syncSystemTheme: 开始同步");const t=e.index.getStorageSync("darkMode");console.log("[Settings] syncSystemTheme: Storage 中的 darkMode:",t);const o="true"===t;this.darkMode!==o?(console.log("[Settings] syncSystemTheme: 更新 darkMode",this.darkMode,"->",o),this.darkMode=o,e.index.setStorageSync("darkMode",o.toString()),this.applyTheme()):console.log("[Settings] syncSystemTheme: 值相同，无需更新")}catch(t){console.error("[Settings] syncSystemTheme 失败:",t)}},async toggleFollowSystem(t){if(console.log("[Settings] 切换跟随系统:",t.detail.value),this.followSystem=t.detail.value,e.index.setStorageSync("followSystem",this.followSystem.toString()),this.followSystem){const t=await this.getRealSystemTheme();console.log("[Settings] 开启跟随系统，当前系统主题:",t),this.darkMode="dark"===t,console.log("[Settings] 设置 darkMode:",this.darkMode),e.index.setStorageSync("darkMode",this.darkMode.toString())}this.applyTheme()},async applyTheme(){console.log("[Settings] 应用主题, followSystem:",this.followSystem,"darkMode:",this.darkMode);let t="light";if(this.followSystem){t=await this.getRealSystemTheme(),console.log("[Settings] 跟随系统模式，系统主题:",t);const o="dark"===t;this.darkMode!==o&&(console.log("[Settings] 更新 darkMode:",this.darkMode,"->",o),this.darkMode=o,e.index.setStorageSync("darkMode",this.darkMode.toString()))}else this.darkMode&&(t="dark",console.log("[Settings] 手动深色模式"));console.log("[Settings] 最终主题:",t),o.setAppTheme(t)},getSleepTimerDisplay(){const e=this.sleepTimerRemaining;if("number"!=typeof e||isNaN(e)||e<=0)return"已关闭";const t=Math.floor(e/3600),o=Math.floor(e%3600/60),s=e%60;return t>0?`${t}时${o}分${s}秒后停止`:o>0?`${o}分${s}秒后停止`:`${s}秒后停止`},getSleepTimerValue(){const e=this.sleepTimerRemaining;if("number"!=typeof e||isNaN(e)||e<=0)return"关闭";const t=Math.floor(e/3600),o=Math.floor(e%3600/60);return t>0?`${t}时${o}分`:`${o}分`},showSleepTimerSelector(){this.sleepTimerPickerValue=[0,0],this.tempSelectedHour=0,this.tempSelectedMinute=0,this.showSleepTimerPopup=!0},closeSleepTimerPopup(){this.showSleepTimerPopup=!1},onSleepTimerPickerChange(e){const t=e.detail.value;this.sleepTimerPickerValue=t,this.tempSelectedHour=t[0],this.tempSelectedMinute=t[1]},cancelSleepTimer(){e.index.$emit("sleepTimerCancel")},confirmSleepTimerSelection(){const t=this.tempSelectedHour,o=this.tempSelectedMinute,s=3600*t+60*o;if(s<=0)return void e.index.showToast({title:"请选择有效的时间",icon:"none"});e.index.$emit("sleepTimerSet",{totalSeconds:s});const i=t>0?`${t}时${o}分后停止播放`:`${o}分钟后停止播放`;e.index.showToast({title:i,icon:"success"}),this.closeSleepTimerPopup()},getCacheSize(){let t=[];try{const o=e.index.getStorageInfoSync();t=o.keys||[]}catch(o){return console.error("[缓存管理] 获取存储键失败:",o),this.resourceCacheSize="获取失败",void(this.metaCacheSize="0KB")}setTimeout(()=>{this.getResourceCacheSize(t)},0),setTimeout(()=>{this.getMetaCacheInfo(t)},100)},getResourceCacheSize(t){console.log("[缓存管理] 开始获取资源缓存大小");try{e.index.getStorageInfo({success:o=>{const s=o.currentSize,i=(s/1024).toFixed(2),a=t||o.keys||[],c=a.filter(e=>e.startsWith("music_url_")||e.startsWith("@music_url__"));let n=0;c.forEach(t=>{try{const o=e.index.getStorageSync(t);o&&(n+=JSON.stringify(o).length)}catch(o){}});const r=(n/1024).toFixed(2);this.musicUrlCacheCount=c.length;const l=a.filter(e=>e.startsWith("lyric_cache_"));let h=0;l.forEach(t=>{try{const o=e.index.getStorageSync(t);o&&(h+=JSON.stringify(o).length)}catch(o){}});const g=(h/1024).toFixed(2),u=a.filter(e=>e.startsWith("pic_url_"));let p=0;u.forEach(t=>{try{const o=e.index.getStorageSync(t);o&&(p+=JSON.stringify(o).length)}catch(o){}});const d=(p/1024).toFixed(2);this.getAudioFileCacheSize().then(e=>{const t=parseFloat(r)+parseFloat(g)+parseFloat(d),o=Math.max(0,s-t);this.appCacheSize=o.toFixed(2)+"KB",this.musicUrlCacheSize=r+"KB",this.resourceCacheSize=(parseFloat(i)+parseFloat(e||0)).toFixed(2)+"MB",console.log("[缓存管理] 资源缓存统计完成:",this.resourceCacheSize)}).catch(()=>{const e=parseFloat(r)+parseFloat(g)+parseFloat(d),t=Math.max(0,s-e);this.appCacheSize=t.toFixed(2)+"KB",this.musicUrlCacheSize=r+"KB",this.resourceCacheSize=i+"MB",console.log("[缓存管理] 资源缓存统计完成:",this.resourceCacheSize)})},fail:()=>{this.resourceCacheSize="获取失败",this.appCacheSize="0KB",this.musicUrlCacheSize="0KB"}})}catch(o){console.error("[缓存管理] 获取资源缓存大小失败:",o),this.resourceCacheSize="获取失败",this.appCacheSize="0KB",this.musicUrlCacheSize="0KB"}},getAudioFileCacheSize:()=>new Promise((t,o)=>{try{e.index.getSavedFileList({success:e=>{if(!e.fileList||0===e.fileList.length)return console.log("[缓存管理] 微信小程序没有保存的音频文件"),void t("0");let o=0,s=0;console.log("[缓存管理] 微信小程序保存的文件数量:",e.fileList.length),e.fileList.forEach(e=>{(e.filePath.includes(".mp3")||e.filePath.includes(".m4a")||e.filePath.includes(".aac")||e.filePath.includes("audio")||e.filePath.includes("music"))&&(o+=e.size,s++,console.log("[缓存管理] 微信小程序音频文件:",e.filePath,"大小:",(e.size/1048576).toFixed(2),"MB"))});const i=(o/1048576).toFixed(2);console.log("[缓存管理] 微信小程序音频文件数量:",s),console.log("[缓存管理] 微信小程序音频文件缓存总大小:",i,"MB"),t(i)},fail:e=>{console.error("[缓存管理] 微信小程序获取保存文件列表失败:",e),t("0")}})}catch(s){console.error("[缓存管理] 微信小程序获取音频文件缓存异常:",s),t("0")}t("0")}),cleanAudioFileCache(){return console.log("[缓存管理] 开始清理音频文件缓存"),new Promise((t,o)=>{try{e.index.getSavedFileList({success:o=>{if(!o.fileList||0===o.fileList.length)return console.log("[缓存管理] 微信小程序没有音频文件需要清理"),void t();let s=0,i=0;const a=[];if(o.fileList.forEach(e=>{(e.filePath.includes(".mp3")||e.filePath.includes(".m4a")||e.filePath.includes(".aac")||e.filePath.includes("audio")||e.filePath.includes("music"))&&a.push(e)}),0===a.length)return console.log("[缓存管理] 微信小程序没有音频文件需要清理"),void t();console.log("[缓存管理] 微信小程序开始清理音频文件，共",a.length,"个");let c=0;a.forEach(o=>{e.index.removeSavedFile({filePath:o.filePath,success:()=>{console.log("[缓存管理] 微信小程序删除音频文件:",o.filePath),s++,c++,c===a.length&&(console.log("[缓存管理] 微信小程序音频文件清理完成，成功删除",s,"个，失败",i,"个"),this.audioFileCacheSize="0MB",t())},fail:e=>{console.error("[缓存管理] 微信小程序删除音频文件失败:",o.filePath,e),i++,c++,c===a.length&&(console.log("[缓存管理] 微信小程序音频文件清理完成，成功删除",s,"个，失败",i,"个"),this.audioFileCacheSize="0MB",t())}})})},fail:e=>{console.error("[缓存管理] 微信小程序获取保存文件列表失败:",e),t()}})}catch(s){console.error("[缓存管理] 微信小程序清理音频文件缓存异常:",s),t()}t()})},getMetaCacheInfo(t){try{let s=t;if(!s)try{s=e.index.getStorageInfoSync().keys||[]}catch(o){s=[]}const i=s.filter(e=>e.startsWith("musicOtherSource_")),a=s.filter(e=>e.startsWith("lyric_cache_"));let c=0;i.forEach(t=>{try{const o=e.index.getStorageSync(t);o&&(c+=JSON.stringify(o).length)}catch(o){}});const n=(c/1024).toFixed(2);this.otherSourceCacheSize=n+"KB";let r=0;a.forEach(t=>{try{const o=e.index.getStorageSync(t);o&&(r+=JSON.stringify(o).length)}catch(o){}});const l=(r/1024).toFixed(2);this.lyricCacheSize=l+"KB";const h=parseFloat(n)+parseFloat(l);this.metaCacheSize=h.toFixed(2)+"KB",this.otherSourceCacheCount=i.length,this.lyricCacheCount=a.length,console.log("[缓存管理] 元数据缓存统计完成:",this.metaCacheSize)}catch(s){console.error("[缓存管理] 获取元数据缓存信息失败:",s),this.otherSourceCacheCount=0,this.otherSourceCacheSize="0KB",this.lyricCacheCount=0,this.lyricCacheSize="0KB",this.metaCacheSize="0KB"}},getStorageKeysByPrefix(t){try{return e.index.getStorageInfoSync().keys.filter(e=>e.startsWith(t))}catch(o){return console.error("获取存储键失败:",o),[]}},showResourceCache(){this.getResourceCacheSize(),this.showResourceCachePopup=!0},closeResourceCachePopup(){this.showResourceCachePopup=!1},cleanResourceCache(){e.index.showModal({title:"确认清理",content:"确定要清理所有资源缓存吗？这将清除应用缓存、歌曲URL缓存和音频文件缓存。",success:t=>{if(t.confirm){this.cleaningResourceCache=!0;[...this.getStorageKeysByPrefix("music_url_"),...this.getStorageKeysByPrefix("@music_url__")].forEach(t=>{try{e.index.removeStorageSync(t),console.log("[缓存管理] 已删除歌曲URL缓存:",t)}catch(o){console.error("[缓存管理] 删除歌曲URL缓存失败:",t,o)}}),this.cleanAudioFileCache().then(()=>{this.getResourceCacheSize(),this.cleaningResourceCache=!1,e.index.showToast({title:"缓存已清理",icon:"success"})}).catch(t=>{console.error("[缓存管理] 清理音频文件缓存失败:",t),this.cleaningResourceCache=!1,e.index.showToast({title:"清理失败",icon:"none"})})}}})},showMetaCache(){this.getMetaCacheInfo(),this.showMetaCachePopup=!0},closeMetaCachePopup(){this.showMetaCachePopup=!1},cleanOtherSourceCache(){e.index.showModal({title:"确认清理",content:"确定要清理换源歌曲缓存吗？",success:t=>{if(t.confirm){this.cleaningOtherSource=!0;this.getStorageKeysByPrefix("musicOtherSource_").forEach(t=>{try{e.index.removeStorageSync(t),console.log("[缓存管理] 已删除换源歌曲缓存:",t)}catch(o){console.error("[缓存管理] 删除换源歌曲缓存失败:",t,o)}}),this.getMetaCacheInfo(),this.cleaningOtherSource=!1,e.index.showToast({title:"换源歌曲缓存已清理",icon:"success"})}}})},cleanLyricCache(){e.index.showModal({title:"确认清理",content:"确定要清理歌词缓存吗？",success:t=>{if(t.confirm){this.cleaningLyric=!0;this.getStorageKeysByPrefix("lyric_cache_").forEach(t=>{try{e.index.removeStorageSync(t),console.log("[缓存管理] 已删除歌词缓存:",t)}catch(o){console.error("[缓存管理] 删除歌词缓存失败:",t,o)}}),this.getMetaCacheInfo(),this.cleaningLyric=!1,e.index.showToast({title:"歌词缓存已清理",icon:"success"})}}})},initLanguageSettings(){this.currentLanguage=t.getCurrentLanguage(),this.supportedLanguages=t.getSupportedLanguages()},showLanguageSelector(){this.tempLanguage=this.currentLanguage,this.showLanguagePopup=!0},closeLanguagePopup(){this.showLanguagePopup=!1},selectLanguage(e){this.tempLanguage=e},confirmLanguageSelection(){this.tempLanguage!==this.currentLanguage&&(this.currentLanguage=this.tempLanguage,t.setLanguage(this.currentLanguage),e.index.showToast({title:"语言已切换",icon:"success"})),this.closeLanguagePopup()},getCurrentLanguageName(){const e=this.supportedLanguages.find(e=>e.code===this.currentLanguage);return e?e.name:"简体中文"},showServerModal(){this.serverAddress=i.getServerUrl(),this.showServerModalFlag=!0},closeServerModal(){this.showServerModalFlag=!1,this.connectionTestResult=null},async testServerConnection(){const t=this.serverAddress.trim();if(!t)return void e.index.showToast({title:"请输入服务器地址",icon:"none"});if(/^(http|https):\/\/[^\s]+$/.test(t)){this.testingConnection=!0,this.connectionTestResult=null;try{const o=await e.index.request({url:`${t}/api/scripts/loaded`,method:"GET",timeout:1e4});if(200===o.statusCode&&o.data&&200===o.data.code){const e=(o.data.data||[]).length;this.connectionTestResult={success:!0,message:`连接成功，发现 ${e} 个音源`}}else 404===o.statusCode?this.connectionTestResult={success:!1,message:"接口不存在，请确认服务器地址正确"}:500===o.statusCode?this.connectionTestResult={success:!1,message:"服务器内部错误，请稍后重试"}:401===o.statusCode||403===o.statusCode?this.connectionTestResult={success:!1,message:"无权限访问该服务器"}:this.connectionTestResult={success:!1,message:`服务器响应异常（状态码: ${o.statusCode||"未知"}）`}}catch(o){console.error("[设置] 测试服务器连通性失败:",o);let e="连接失败，请检查网络";o.errMsg&&(o.errMsg.includes("timeout")?e="连接超时，请检查服务器是否运行":o.errMsg.includes("fail")||o.errMsg.includes("error")?e="无法连接到服务器，请检查地址是否正确":o.errMsg.includes("network")&&(e="网络异常，请检查网络连接")),this.connectionTestResult={success:!1,message:e}}finally{this.testingConnection=!1}}else e.index.showToast({title:"请输入有效的URL地址",icon:"none"})},confirmServerAddress(){const t=this.serverAddress.trim();if(!t)return void e.index.showToast({title:"请输入服务器地址",icon:"none"});if(!/^(http|https):\/\/[^\s]+$/.test(t))return void e.index.showToast({title:"请输入有效的URL地址",icon:"none"});i.setServerUrl(t)?(e.index.showToast({title:"服务器地址已保存",icon:"success"}),this.closeServerModal()):e.index.showToast({title:"保存失败",icon:"none"})},openAboutPage(){this.showAboutPopup=!0},closeAboutPopup(){this.showAboutPopup=!1},openUserAgreement(){this.pactAgreed="true"===e.index.getStorageSync("isAgreePact"),this.showUserAgreementPopup=!0},closeUserAgreementPopup(){this.showUserAgreementPopup=!1},openHelpAndFeedback(){e.index.showToast({title:"帮助与反馈开发中",icon:"none"})},checkForUpdates(){e.index.showToast({title:"已是最新版本",icon:"success"})}}};if(!Array){e.resolveComponent("roc-icon-plus")()}Math;const c=e._export_sfc(a,[["render",function(t,o,s,i,a,c){return e.e({a:e.p({type:"fas",name:"chevron-left",size:"20",color:"#4b5563"}),b:e.o((...e)=>c.goBack&&c.goBack(...e)),c:e.t(c.$t("settings.settings")),d:a.darkMode?1:"",e:e.s(c.navbarStyle),f:e.t(c.$t("settings.personalization")),g:e.p({type:"fas",name:"moon",size:"16",color:"#00d7cd"}),h:e.t(c.$t("settings.darkMode")),i:a.darkMode,j:e.o((...e)=>c.toggleDarkMode&&c.toggleDarkMode(...e)),k:e.p({type:"fas",name:"sync-alt",size:"16",color:"#00d7cd"}),l:e.t(c.$t("settings.followSystem")),m:a.followSystem,n:e.o((...e)=>c.toggleFollowSystem&&c.toggleFollowSystem(...e)),o:e.p({type:"fas",name:"language",size:"16",color:"#00d7cd"}),p:e.t(c.$t("settings.language")),q:e.t(c.getCurrentLanguageName()),r:e.p({type:"fas",name:"chevron-right",size:"14",color:"#9ca3af"}),s:e.o((...e)=>c.showLanguageSelector&&c.showLanguageSelector(...e)),t:e.t(c.$t("settings.playbackSettings")),v:e.p({type:"fas",name:"clock",size:"16",color:"#00d7cd"}),w:e.t(c.$t("settings.sleepTimer")),x:e.t(c.getSleepTimerDisplay()),y:e.t(c.getSleepTimerValue()),z:e.p({type:"fas",name:"chevron-right",size:"14",color:"#9ca3af"}),A:e.o((...e)=>c.showSleepTimerSelector&&c.showSleepTimerSelector(...e)),B:e.p({type:"fas",name:"database",size:"16",color:"#00d7cd"}),C:e.t(a.resourceCacheSize),D:e.p({type:"fas",name:"chevron-right",size:"14",color:"#9ca3af"}),E:e.o((...e)=>c.showResourceCache&&c.showResourceCache(...e)),F:e.p({type:"fas",name:"file-code",size:"16",color:"#00d7cd"}),G:e.t(a.metaCacheSize),H:e.p({type:"fas",name:"chevron-right",size:"14",color:"#9ca3af"}),I:e.o((...e)=>c.showMetaCache&&c.showMetaCache(...e)),J:e.t(c.$t("settings.sourceManagement")),K:e.p({type:"fas",name:"music",size:"16",color:"#00d7cd"}),L:e.t(c.$t("settings.sourceManagement")),M:e.p({type:"fas",name:"chevron-right",size:"14",color:"#9ca3af"}),N:e.o((...e)=>c.goToMusicSources&&c.goToMusicSources(...e)),O:e.p({type:"fas",name:"server",size:"16",color:"#00d7cd"}),P:e.p({type:"fas",name:"chevron-right",size:"14",color:"#9ca3af"}),Q:e.o((...e)=>c.showServerModal&&c.showServerModal(...e)),R:e.t(c.$t("settings.about")),S:e.p({type:"fas",name:"info-circle",size:"16",color:"#00d7cd"}),T:e.t(c.$t("settings.aboutCeladonMusic")),U:e.p({type:"fas",name:"chevron-right",size:"14",color:"#9ca3af"}),V:e.o((...e)=>c.openAboutPage&&c.openAboutPage(...e)),W:e.p({type:"fas",name:"file-alt",size:"16",color:"#00d7cd"}),X:e.t(c.$t("settings.userAgreement")),Y:e.p({type:"fas",name:"chevron-right",size:"14",color:"#9ca3af"}),Z:e.o((...e)=>c.openUserAgreement&&c.openUserAgreement(...e)),aa:e.p({type:"fas",name:"question-circle",size:"16",color:"#00d7cd"}),ab:e.t(c.$t("settings.helpAndFeedback")),ac:e.p({type:"fas",name:"chevron-right",size:"14",color:"#9ca3af"}),ad:e.o((...e)=>c.openHelpAndFeedback&&c.openHelpAndFeedback(...e)),ae:e.p({type:"fas",name:"sync",size:"16",color:"#00d7cd"}),af:e.t(c.$t("settings.checkForUpdates")),ag:e.t(a.appVersion),ah:e.p({type:"fas",name:"chevron-right",size:"14",color:"#9ca3af"}),ai:e.o((...e)=>c.checkForUpdates&&c.checkForUpdates(...e)),aj:e.t(c.$t("app.name")),ak:e.t(c.$t("app.slogan")),al:a.showLanguagePopup},a.showLanguagePopup?{am:e.t(c.$t("settings.selectLanguage")),an:e.p({type:"fas",name:"times",size:"16",color:"#6b7280"}),ao:e.o((...e)=>c.closeLanguagePopup&&c.closeLanguagePopup(...e)),ap:e.f(a.supportedLanguages,(t,o,s)=>e.e({a:e.t(t.name),b:a.currentLanguage===t.code},a.currentLanguage===t.code?{c:"45854c89-24-"+s,d:e.p({type:"fas",name:"check",size:"16",color:"#00d7cd"})}:{},{e:t.code,f:a.currentLanguage===t.code?1:"",g:e.o(e=>c.selectLanguage(t.code),t.code)})),aq:e.t(c.$t("common.confirm")),ar:e.o((...e)=>c.confirmLanguageSelection&&c.confirmLanguageSelection(...e)),as:e.o(()=>{}),at:e.o((...e)=>c.closeLanguagePopup&&c.closeLanguagePopup(...e))}:{},{av:a.showSleepTimerPopup},a.showSleepTimerPopup?e.e({aw:e.t(c.$t("settings.sleepTimer")),ax:e.p({type:"fas",name:"times",size:"16",color:"#6b7280"}),ay:e.o((...e)=>c.closeSleepTimerPopup&&c.closeSleepTimerPopup(...e)),az:a.sleepTimerRemaining>0},a.sleepTimerRemaining>0?{aA:e.t(c.formatSleepTimerRemaining),aB:e.o((...e)=>c.cancelSleepTimer&&c.cancelSleepTimer(...e))}:{},{aC:e.f(c.hourOptions,(t,o,s)=>({a:e.t(t),b:o})),aD:e.f(c.minuteOptions,(t,o,s)=>({a:e.t(t),b:o})),aE:a.sleepTimerPickerValue,aF:e.o((...e)=>c.onSleepTimerPickerChange&&c.onSleepTimerPickerChange(...e)),aG:e.o((...e)=>c.closeSleepTimerPopup&&c.closeSleepTimerPopup(...e)),aH:e.o((...e)=>c.confirmSleepTimerSelection&&c.confirmSleepTimerSelection(...e)),aI:e.o(()=>{}),aJ:e.o((...e)=>c.closeSleepTimerPopup&&c.closeSleepTimerPopup(...e))}):{},{aK:a.showServerModalFlag},a.showServerModalFlag?e.e({aL:e.p({type:"fas",name:"times",size:"16",color:"#6b7280"}),aM:e.o((...e)=>c.closeServerModal&&c.closeServerModal(...e)),aN:a.serverAddress,aO:e.o(e=>a.serverAddress=e.detail.value),aP:a.connectionTestResult},a.connectionTestResult?{aQ:e.p({type:"fas",name:a.connectionTestResult.success?"check-circle":"times-circle",size:"16",color:a.connectionTestResult.success?"#10b981":"#ef4444"}),aR:e.n(a.connectionTestResult.success?"success":"error"),aS:e.t(a.connectionTestResult.message),aT:e.n(a.connectionTestResult.success?"success":"error")}:{},{aU:e.o((...e)=>c.closeServerModal&&c.closeServerModal(...e)),aV:a.testingConnection},a.testingConnection?{aW:e.p({type:"fas",name:"spinner",size:"14",color:"#6b7280"})}:{},{aX:e.t(a.testingConnection?"测试中...":"测试"),aY:a.testingConnection||!a.serverAddress.trim()?1:"",aZ:e.o((...e)=>c.testServerConnection&&c.testServerConnection(...e)),ba:e.o((...e)=>c.confirmServerAddress&&c.confirmServerAddress(...e)),bb:e.o(()=>{}),bc:e.o((...e)=>c.closeServerModal&&c.closeServerModal(...e))}):{},{bd:a.showResourceCachePopup},a.showResourceCachePopup?{be:e.p({type:"fas",name:"times",size:"16",color:"#6b7280"}),bf:e.o((...e)=>c.closeResourceCachePopup&&c.closeResourceCachePopup(...e)),bg:e.t(a.resourceCacheSize),bh:e.t(a.appCacheSize),bi:e.t(a.musicUrlCacheSize),bj:e.t(a.musicUrlCacheCount),bk:e.t(a.audioFileCacheSize),bl:e.t(a.cleaningResourceCache?"清理中...":"清理缓存"),bm:a.cleaningResourceCache?1:"",bn:e.o((...e)=>c.cleanResourceCache&&c.cleanResourceCache(...e)),bo:e.o(()=>{}),bp:e.o((...e)=>c.closeResourceCachePopup&&c.closeResourceCachePopup(...e))}:{},{bq:a.showMetaCachePopup},a.showMetaCachePopup?{br:e.p({type:"fas",name:"times",size:"16",color:"#6b7280"}),bs:e.o((...e)=>c.closeMetaCachePopup&&c.closeMetaCachePopup(...e)),bt:e.t(a.metaCacheSize),bv:e.t(a.otherSourceCacheSize),bw:e.t(a.lyricCacheSize),bx:e.t(a.cleaningOtherSource?"清理中...":"清理换源歌曲缓存"),by:a.cleaningOtherSource?1:"",bz:e.o((...e)=>c.cleanOtherSourceCache&&c.cleanOtherSourceCache(...e)),bA:e.t(a.cleaningLyric?"清理中...":"清理歌词缓存"),bB:a.cleaningLyric?1:"",bC:e.o((...e)=>c.cleanLyricCache&&c.cleanLyricCache(...e)),bD:e.o(()=>{}),bE:e.o((...e)=>c.closeMetaCachePopup&&c.closeMetaCachePopup(...e))}:{},{bF:a.showAboutPopup},a.showAboutPopup?{bG:e.p({type:"fas",name:"leaf",size:"20",color:"#ffffff"}),bH:e.t(a.appVersion),bI:e.o((...e)=>c.closeAboutPopup&&c.closeAboutPopup(...e)),bJ:e.o(()=>{}),bK:e.o((...e)=>c.closeAboutPopup&&c.closeAboutPopup(...e))}:{},{bL:a.showUserAgreementPopup},a.showUserAgreementPopup?e.e({bM:a.pactAgreed},a.pactAgreed?{bN:e.p({type:"fas",name:"check-circle",size:"14",color:"#10b981"})}:{},{bO:a.pactAgreed},a.pactAgreed?{bP:e.p({type:"fas",name:"info-circle",size:"16",color:"#00d7cd"}),bQ:e.t(c.pactAgreedTime)}:{},{bR:e.o((...e)=>c.closeUserAgreementPopup&&c.closeUserAgreementPopup(...e)),bS:e.o(()=>{}),bT:e.o((...e)=>c.closeUserAgreementPopup&&c.closeUserAgreementPopup(...e))}):{},{bU:a.darkMode?1:""})}]]);wx.createPage(c);

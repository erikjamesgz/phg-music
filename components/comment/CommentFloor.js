"use strict";const e=require("../../common/vendor.js");Math||t();const t=()=>"../../uni_modules/roc-icon-plus/components/roc-icon-plus/roc-icon-plus.js",o={__name:"CommentFloor",props:{comments:{type:Array,default:()=>[]}},setup(t){const o=t,a=e.ref(!1),l=()=>{a.value="true"===e.index.getStorageSync("darkMode"),console.log("[CommentFloor] 刷新暗黑模式:",a.value)};e.onMounted(()=>{a.value="true"===e.index.getStorageSync("darkMode"),console.log("[CommentFloor] 初始化暗黑模式:",a.value),e.index.$on("darkModeChanged",l)});const n=e.ref("https://via.placeholder.com/40x40?text=User"),r=e=>{e.target.src=n.value};return e.watch(()=>o.comments,e=>{console.log("[CommentFloor] 评论列表更新:",e),console.log("[CommentFloor] 子评论数量:",e.filter(e=>e.reply&&e.reply.length>0).length)},{deep:!0}),(o,l)=>({a:e.f(t.comments,(t,o,l)=>e.e({a:t.avatar&&""!==t.avatar?t.avatar:n.value,b:e.o(r,t.id),c:e.t(t.userName),d:null!==t.likedCount&&void 0!==t.likedCount},null!==t.likedCount&&void 0!==t.likedCount?{e:"e12ac861-0-"+l,f:e.p({type:"far",name:"heart",size:"12",color:a.value?"#ffffff":"#999"}),g:e.t(t.likedCount)}:{},{h:t.timeStr||t.location},t.timeStr||t.location?e.e({i:t.timeStr},t.timeStr?{j:e.t(t.timeStr)}:{},{k:t.location},t.location?{l:e.t(t.location)}:{}):{},{m:e.t(t.text),n:t.images&&t.images.length},t.images&&t.images.length?{o:e.f(t.images,(o,a,l)=>({a:a,b:o,c:e.o(a=>((t,o)=>{e.index.previewImage({current:t,urls:o})})(o,t.images),a)}))}:{},{p:t.reply&&t.reply.length>0},t.reply&&t.reply.length>0?{q:e.f(t.reply,(t,o,i)=>e.e({a:t.avatar&&""!==t.avatar?t.avatar:n.value,b:e.o(r,t.id),c:e.t(t.userName),d:null!==t.likedCount&&void 0!==t.likedCount},null!==t.likedCount&&void 0!==t.likedCount?{e:"e12ac861-1-"+l+"-"+i,f:e.p({type:"far",name:"heart",size:"10",color:a.value?"#ffffff":"#999"}),g:e.t(t.likedCount)}:{},{h:t.timeStr||t.location},t.timeStr||t.location?e.e({i:t.timeStr},t.timeStr?{j:e.t(t.timeStr)}:{},{k:t.location},t.location?{l:e.t(t.location)}:{}):{},{m:e.t(t.text),n:t.id}))}:{},{r:t.id})),b:a.value?1:""})}},a=e._export_sfc(o,[["__scopeId","data-v-e12ac861"]]);wx.createComponent(a);

"use strict";const e=require("../../common/vendor.js"),t={name:"PactModal",props:{visible:{type:Boolean,default:!1},isAgreed:{type:Boolean,default:!1}},data:()=>({countdown:20,timer:null,isDarkMode:!1}),watch:{visible:{immediate:!0,handler(e){console.log("[PactModal] visible 变化:",e),e?(this.checkDarkMode(),this.isAgreed||this.startCountdown()):this.clearTimer()}}},methods:{checkDarkMode(){if("false"!==e.index.getStorageSync("followSystem")){const t=e.index.getSystemInfoSync();this.isDarkMode="dark"===t.theme}else this.isDarkMode="true"===e.index.getStorageSync("darkMode");console.log("[PactModal] isDarkMode:",this.isDarkMode)},startCountdown(){this.countdown=20,this.clearTimer(),this.timer=setInterval(()=>{console.log("[PactModal] 倒计时:",this.countdown),this.countdown>0?this.countdown--:this.clearTimer()},1e3)},clearTimer(){this.timer&&(clearInterval(this.timer),this.timer=null)},handleReject(){console.log("[PactModal] 用户点击拒绝"),this.$emit("reject")},handleAccept(){console.log("[PactModal] 用户点击接受，countdown:",this.countdown),this.countdown>0||(this.clearTimer(),console.log("[PactModal] 发射 agree 事件"),this.$emit("agree"))}},beforeDestroy(){this.clearTimer()}};const o=e._export_sfc(t,[["render",function(t,o,i,s,n,d){return e.e({a:i.visible},i.visible?e.e({b:!i.isAgreed},(i.isAgreed,{}),{c:!i.isAgreed},(i.isAgreed,{}),{d:!i.isAgreed},i.isAgreed?{}:{e:e.o((...e)=>d.handleReject&&d.handleReject(...e))},{f:e.t(n.countdown>0?`接受（${n.countdown}）`:"接受"),g:n.countdown>0?1:"",h:e.o((...e)=>d.handleAccept&&d.handleAccept(...e)),i:n.isDarkMode?1:""}):{})}],["__scopeId","data-v-dcedfdba"]]);wx.createComponent(o);

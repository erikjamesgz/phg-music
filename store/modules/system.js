"use strict";const e=require("../../common/vendor.js"),t={theme:"light",language:"zh-CN",searchHistory:[]},s={getState:()=>t,setState(s){Object.assign(t,s),e.index.setStorageSync("system",JSON.stringify(t))},setTheme(s){t.theme=s,e.index.setStorageSync("system",JSON.stringify(t))},setLanguage(s){t.language=s,e.index.setStorageSync("system",JSON.stringify(t))},addSearchHistory(s){t.searchHistory.includes(s)||(t.searchHistory.unshift(s),t.searchHistory.length>10&&t.searchHistory.pop(),e.index.setStorageSync("system",JSON.stringify(t)))},clearSearchHistory(){t.searchHistory=[],e.index.setStorageSync("system",JSON.stringify(t))},restoreState(){const s=e.index.getStorageSync("system");if(s)try{const e=JSON.parse(s);Object.assign(t,e)}catch(r){console.error("恢复系统状态失败:",r)}}};exports.systemStore=s;
